# CarpetTracker

Для запуска работы необходимо:

1. Скачать проект по ссылке https://github.com/SurriKen/CarpetTracker/tree/prod <br><br>
2. В файле 'parameters.py' указать системный путь к проекту - ROOT_DIR <br><br>
3. По ссылке https://disk.yandex.ru/d/V5h-Ni4op-yIUQ находятся веса обученных моделей, необходимо их скачать и разархивировать в заранее созданной папке 'run' в папке проекта, убедиться что пути к весам моделей, указанные в параметрах YOLO_WEIGTHS и CLASSIFICATION_MODEL (файл 'parameters.py'), соответствуют фактический, в случае несоответствия поправить расположение файлов и/или указать новые ссылки<br><br>
4. Рабочим файлом является "predict.py", для запуска работы необходимо правильно указать ссылки на обрабатываетмые видео, и путь для сохранения результат (в формате csv и по запросу в виде видео с разметкой работы нейросетей)<br><br>
5. Функция <i>predict(video_paths: dict, stream: bool = False, save_predict_video: bool = False)</i> на вход принимает следующие параметры:<br>
   - <i>video_paths</i>: словарь со всеми рабочими путями (пути к видео и путь для сохранения)<br>
   - <i>stream</i>: функция работает как с файлами видео (синхронихированными, указать stream = False), так и с потоковым видео напрямую с камер (rtsp, указать stream = True)<br>
   - <i>save_predict_video</i>: при save_predict_video = True сохраняется результат обработки видео с разметкой результатов раюоты нейросетей (если неробходим визуальный контроль работы программы)<br><br>
   Основной результат работы сохраняется в виде csv-файла, имя файла представляет собой дату и время начала обработки видео<br><br>
6. Подача ссылок на видео происходит словарем со следуюцим содержимым<br>
        <i>video_paths = {<br>
        <p>&nbsp;&nbsp;&nbsp;&nbsp; 'model_1': системный путь к видео с камеры 1 (угловая),
        <p>&nbsp;&nbsp;&nbsp;&nbsp; 'model_2': системный путь к видео с камеры 2 (центральная),
        <p>&nbsp;&nbsp;&nbsp;&nbsp; 'save_path': папка для сохранения результатов,<br>
        }</i><br><br>

   пример вида с камеры 1 (угловая)
   ![0.jpg](dataset_process%2F0.jpg)

   пример вида с камеры 2 (центральная)
   ![7302.jpg](dataset_process%2F7302.jpg)

   пример вида результатов работы на видео при save_predict_video = True
   ![5.png](dataset_process%2F5.png)