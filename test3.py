import random

import numpy as np

x = {1: dict(frame_id=[1559, 1560, 1561, 1562, 1563, 1566, 1567, 1568, 1569, 1570, 1571, 1572, 1573],
             coords=[[705, 380, 864, 587, 0.748770534992218, 0], [705, 381, 864, 588, 0.7549654245376587, 0],
                     [709, 372, 868, 556, 0.7755820751190186, 0], [729, 356, 886, 546, 0.7685152292251587, 0],
                     [740, 346, 909, 539, 0.7643046975135803, 0], [811, 324, 968, 502, 0.6995595693588257, 0],
                     [809, 339, 1014, 499, 0.7702568173408508, 0], [817, 350, 1066, 509, 0.801852822303772, 0],
                     [835, 343, 1167, 532, 0.8239697813987732, 0], [836, 343, 1167, 531, 0.8221980333328247, 0],
                     [873, 365, 1212, 549, 0.7056800723075867, 0], [913, 390, 1237, 570, 0.7685009837150574, 0],
                     [950, 442, 1290, 616, 0.7805030345916748, 0]],
             shift=[1.0, 20.886598574205422, 23.021728866442675, 19.00657780874821, 71.38101988624148,
                    22.80350850198276,
                    31.784430150625635, 60.035406219996545, 0.7071067811865476, 45.617978911828175, 39.81519810323691,
                    66.52818951391959],
             countable=True, relevant=True),
     2: dict(frame_id=[1639, 1641, 1642, 1643, 1644, 1645, 1646, 1647, 1648, 1649, 1650, 1651, 1652],
             coords=[[540, 330, 797, 442, 0.2573239505290985, 0], [562, 330, 806, 467, 0.47299131751060486, 0],
                     [569, 324, 825, 489, 0.44955143332481384, 0], [651, 313, 845, 501, 0.796888530254364, 0],
                     [764, 281, 891, 476, 0.5788338780403137, 0], [764, 281, 891, 476, 0.5844828486442566, 0],
                     [812, 253, 960, 453, 0.7864378690719604, 0], [822, 234, 1003, 391, 0.8317819833755493, 0],
                     [831, 215, 1037, 333, 0.8615102767944336, 0], [855, 150, 1053, 242, 0.7064792513847351, 0],
                     [855, 150, 1053, 242, 0.7010201811790466, 0], [865, 125, 1059, 196, 0.5485270619392395, 0],
                     [875, 96, 1086, 177, 0.45856085419654846, 0]],
             shift=[19.912307751739878, 15.264337522473747, 51.00245092149984, 84.45412956155549, 0.0,
                    63.81614215854794,
                    48.399380161320245, 44.09648512069868, 80.52328855678958, 0.0, 36.39024594585752,
                    30.30264014900352],
             countable=True, relevant=True),
     3: dict(frame_id=[1702, 1703, 1704, 1705, 1706, 1707, 1708, 1709, 1710, 1711, 1712],
             coords=[[564, 329, 837, 477, 0.7486244440078735, 0], [599, 310, 852, 505, 0.8123329877853394, 0],
                     [671, 300, 874, 501, 0.7984760403633118, 0], [773, 277, 938, 484, 0.7772899270057678, 0],
                     [773, 277, 938, 484, 0.7797021269798279, 0], [814, 246, 982, 417, 0.8079827427864075, 0],
                     [823, 239, 1034, 363, 0.7992150187492371, 0], [834, 204, 1059, 308, 0.7682307362556458, 0],
                     [857, 93, 1096, 208, 0.5904337763786316, 0], [857, 92, 1100, 208, 0.6342113018035889, 0],
                     [862, 42, 1075, 181, 0.3295295238494873, 0]],
             shift=[25.401771591761076, 47.51841748206689, 85.37564055396598, 0.0, 64.86331783065063, 43.1335136523794,
                    48.46648326421054, 109.68249632461873, 2.0615528128088303, 39.777506206397604],
             countable=True, relevant=True),
     4: dict(frame_id=[1810, 1811, 1812, 1813, 1814, 1815, 1816, 1817, 1818, 1819],
             coords=[[714, 310, 886, 485, 0.7575607299804688, 0],
                     [714, 310, 886, 485, 0.76004558801651, 0],
                     [762, 290, 907, 455, 0.6991783976554871, 0],
                     [811, 252, 959, 415, 0.7639831304550171, 0],
                     [818, 240, 1001, 363, 0.7726840972900391, 0],
                     [832, 185, 1050, 267, 0.6472547650337219, 0],
                     [832, 185, 1051, 267, 0.6386691331863403, 0],
                     [843, 144, 1038, 240, 0.44731760025024414, 0],
                     [852, 101, 1105, 208, 0.5854690074920654, 0],
                     [865, 78, 1087, 186, 0.5781942009925842, 0]],
             shift=[0.0, 42.60575078554537, 63.80634764660958, 40.30198506277327,
                    81.80770134895614, 0.5, 34.0147027033899, 53.387732673339855,
                    22.638462845343543],
             countable=True, relevant=True),
     5: dict(frame_id=[1866, 1867, 1868, 1869, 1870, 1871, 1872],
             coords=[[718, 324, 872, 478, 0.5188528299331665, 0], [719, 324, 872, 478, 0.48922374844551086, 0],
                     [752, 324, 929, 466, 0.4142373502254486, 0], [786, 301, 970, 411, 0.7371830344200134, 0],
                     [832, 271, 1005, 363, 0.8163076043128967, 0], [852, 189, 1005, 292, 0.6779100298881531, 0],
                     [852, 189, 1005, 292, 0.6920958161354065, 0]],
             shift=[0.5, 45.39823785126467, 54.1040663906143, 56.224994441973934, 77.15082630795344, 0.0],
             countable=True, relevant=True),
     6: dict(frame_id=[1918, 1919, 1920, 1924, 1925, 1926, 1927, 1928, 1929, 1930, 1931, 1932, 1933],
             coords=[[971, 126, 1053, 256, 0.3904041349887848, 0], [974, 131, 1052, 263, 0.36062997579574585, 0],
                     [975, 130, 1058, 262, 0.3906056880950928, 0], [532, 327, 838, 478, 0.2624785304069519, 0],
                     [575, 319, 871, 484, 0.7797396183013916, 0], [683, 287, 915, 510, 0.8313310146331787, 0],
                     [682, 287, 914, 510, 0.8319860696792603, 0], [749, 263, 945, 520, 0.818589985370636, 0],
                     [804, 247, 972, 505, 0.8009901642799377, 0], [838, 227, 1044, 459, 0.8556216359138489, 0],
                     [881, 185, 1149, 361, 0.8328328132629395, 0], [881, 186, 1149, 361, 0.8334574699401855, 0],
                     [905, 164, 1170, 311, 0.7976794838905334, 0]],
             shift=[6.082762530298219, 3.640054944640259, 390.55665402089875, 38.01315561749642, 76.05918747922567, 1.0,
                    49.49747468305833, 43.83206588788623, 62.433965115151864, 101.86265262597475, 0.5,
                    42.45291509425472],
             countable=True, relevant=True),
     7: dict(frame_id=[1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990],
             coords=[[524, 339, 831, 482, 0.4055422842502594, 0], [552, 336, 873, 493, 0.7660557627677917, 0],
                     [624, 300, 904, 521, 0.8534918427467346, 0], [622, 301, 905, 521, 0.855163037776947, 0],
                     [695, 286, 923, 538, 0.8355231285095215, 0], [772, 265, 945, 534, 0.8434997200965881, 0],
                     [829, 258, 990, 505, 0.8386262655258179, 0], [865, 205, 1110, 394, 0.8237821459770203, 0],
                     [865, 205, 1110, 394, 0.8251131176948547, 0], [883, 186, 1152, 350, 0.8240189552307129, 0],
                     [913, 165, 1168, 308, 0.6776296496391296, 0]],
             shift=[35.22782990761707, 51.655106233556424, 0.7071067811865476, 45.510987684294435, 51.05389309347525,
                    54.08326913195984, 113.17243480636087, 0.0, 43.5, 39.003204996512785],
             countable=True, relevant=True),
     8: dict(frame_id=[1990, 1991, 1992, 1993, 1994],
             coords=[[1021, 188, 1177, 310, 0.6166204810142517, 0],
                     [977, 144, 1212, 255, 0.6054664850234985, 0],
                     [990, 95, 1256, 182, 0.7109543085098267, 0],
                     [990, 96, 1255, 182, 0.7116342782974243, 0],
                     [985, 73, 1269, 168, 0.6353499293327332, 0]],
             shift=[49.704124577342675, 67.32941407735552, 0.7071067811865476, 19.03943276465977],
             countable=False, relevant=True)}

x2 = {
    1: dict(
        frame_id=[1643, 1644, 1645, 1646, 1647, 1648],
        coords=[[147, 139, 240, 192, 0.4290904700756073, 0], [151, 146, 249, 200, 0.7497811913490295, 0],
                [152, 143, 268, 222, 0.7678024768829346, 0], [170, 141, 276, 230, 0.7987105846405029, 0],
                [188, 134, 299, 234, 0.6869490742683411, 0], [209, 123, 337, 238, 0.4863896071910858, 0]],
        shift=[9.924716620639604, 13.793114224133722, 13.341664064126334, 20.554804791094465, 29.706901555025897],
        countable=True,
        relevant=True),
    2: dict(
        frame_id=[1648, 1649, 1650, 1651, 1652, 1653, 1654, 1655, 1656, 1657, 1658, 1659, 1660],
        coords=[[209, 89, 352, 235, 0.5389997959136963, 0], [250, 126, 352, 233, 0.7172231078147888, 0],
                [274, 116, 373, 216, 0.7859902381896973, 0], [281, 108, 401, 211, 0.7637674808502197, 0],
                [318, 122, 447, 198, 0.7722872495651245, 0], [368, 127, 482, 197, 0.7410107851028442, 0],
                [398, 129, 513, 197, 0.7916513681411743, 0], [414, 133, 538, 196, 0.7747327089309692, 0],
                [438, 140, 564, 195, 0.7776492834091187, 0], [459, 147, 581, 199, 0.3257051706314087, 0],
                [481, 151, 580, 211, 0.4874267876148224, 0], [494, 156, 607, 224, 0.6757509708404541, 0],
                [515, 156, 621, 235, 0.6988015174865723, 0]],
        shift=[26.953663943887108, 26.239283526803852, 18.66815470259447, 41.50301193889427, 42.547032799009614,
               30.516389039334257, 20.554804791094465, 25.179356624028344, 19.78004044485248, 13.200378782444085,
               21.93171219946131, 18.34393632784414],
        countable=True,
        relevant=True),
    3: dict(frame_id=[1703, 1704, 1705, 1706, 1707, 1708, 1709, 1710, 1711, 1712, 1713, 1714, 1715, 1716, 1717, 1718],
            coords=[[155, 142, 244, 211, 0.7874088287353516, 0], [159, 149, 259, 225, 0.8073312640190125, 0],
                    [170, 149, 273, 226, 0.8199416399002075, 0], [186, 143, 289, 233, 0.8210309743881226, 0],
                    [207, 134, 321, 227, 0.7474921345710754, 0], [210, 128, 343, 226, 0.770066499710083, 0],
                    [239, 120, 356, 215, 0.6994280815124512, 0], [272, 115, 380, 202, 0.7870339155197144, 0],
                    [277, 106, 415, 197, 0.7857232689857483, 0], [321, 105, 459, 167, 0.6508906483650208, 0],
                    [366, 116, 501, 162, 0.5186547636985779, 0], [390, 103, 521, 154, 0.5819099545478821, 0],
                    [409, 104, 542, 153, 0.7540209293365479, 0], [437, 100, 561, 155, 0.7656910419464111, 0],
                    [459, 103, 577, 157, 0.7896634340286255, 0], [485, 110, 589, 163, 0.5461328625679016, 0]],
            shift=[14.159802258506296, 12.509996003196804, 16.00781059358212, 27.54087870784082, 12.98075498574717,
                   23.04886114323222, 29.88728826775691, 21.18962010041709, 46.650294747193186, 43.603325561245896,
                   24.37724348649781, 20.0, 23.521266972678152, 19.1637678967368, 20.081085628023203],
            countable=True,
            relevant=True),
    5: dict(frame_id=[1759, 1760, 1761, 1762, 1763, 1765, 1766, 1767],
            coords=[[219, 118, 351, 230, 0.5107545852661133, 0],
                    [261, 131, 354, 225, 0.7922630310058594, 0],
                    [273, 123, 386, 214, 0.8143255114555359, 0],
                    [285, 121, 419, 204, 0.6750926375389099, 0],
                    [327, 113, 441, 186, 0.5410692691802979, 0],
                    [406, 131, 520, 181, 0.7596290707588196, 0],
                    [418, 139, 538, 175, 0.6902375817298889, 0],
                    [454, 145, 558, 179, 0.5584408044815063, 0]],
            shift=[22.85278976405288, 23.96351393264352, 23.286262044390035, 34.539832078341085,
                   79.26695402246764, 15.033296378372908, 28.442925306655784],
            countable=True, relevant=True),
    6: dict(frame_id=[1810, 1811, 1812, 1813, 1814, 1815, 1816, 1817, 1818, 1820, 1821, 1822, 1823, 1824, 1825, 1826,
                      1827],
            coords=[[158, 138, 246, 204, 0.560769259929657, 0], [158, 143, 258, 211, 0.7110497355461121, 0],
                    [167, 151, 275, 215, 0.817257821559906, 0], [195, 148, 288, 217, 0.7797403931617737, 0],
                    [195, 139, 334, 219, 0.7736111283302307, 0], [219, 128, 350, 220, 0.7516330480575562, 0],
                    [256, 124, 353, 214, 0.8269932270050049, 0], [273, 116, 379, 203, 0.7920434474945068, 0],
                    [274, 111, 401, 195, 0.738054096698761, 0], [376, 126, 492, 188, 0.5154188871383667, 0],
                    [398, 128, 514, 200, 0.7561833262443542, 0], [413, 129, 530, 202, 0.7997597455978394, 0],
                    [436, 126, 549, 209, 0.8377120494842529, 0], [465, 124, 565, 215, 0.8568726778030396, 0],
                    [486, 127, 578, 215, 0.8191852569580078, 0], [501, 136, 589, 216, 0.48174431920051575, 0],
                    [522, 148, 598, 223, 0.5065730810165405, 0]],
            shift=[8.48528137423857, 14.317821063276353, 20.506096654409877, 23.264780248263683, 20.615528128088304,
                   20.615528128088304, 23.50531854708632, 13.209844813622906, 96.5828659752857, 23.08679276123039,
                   15.572411502397436, 21.095023109728988, 22.588713996153036, 17.066048165876012, 13.92838827718412,
                   17.755280904564703],
            countable=True, relevant=True),
    7: dict(frame_id=[1867, 1868, 1869, 1870, 1871, 1872, 1873, 1874, 1875, 1876, 1877, 1878, 1879, 1880, 1882, 1883,
                      1884],
            coords=[[166, 143, 245, 215, 0.5994982123374939, 0], [180, 145, 260, 218, 0.5169481635093689, 0],
                    [211, 154, 283, 238, 0.563247561454773, 0], [234, 137, 325, 235, 0.5090829730033875, 0],
                    [273, 144, 362, 227, 0.7745539546012878, 0], [284, 145, 396, 223, 0.8212109208106995, 0],
                    [334, 144, 432, 217, 0.8181686401367188, 0], [372, 132, 462, 209, 0.8330712914466858, 0],
                    [409, 127, 490, 206, 0.8061179518699646, 0], [439, 129, 506, 204, 0.737030565738678, 0],
                    [461, 132, 531, 205, 0.7929325103759766, 0], [471, 136, 543, 203, 0.8016662001609802, 0],
                    [488, 140, 561, 198, 0.7747756838798523, 0], [507, 141, 568, 209, 0.5579911470413208, 0],
                    [527, 160, 581, 228, 0.6862353086471558, 0], [536, 166, 597, 245, 0.7105433344841003, 0],
                    [541, 175, 607, 251, 0.7312353849411011, 0]],
            shift=[14.713938969562161, 30.64718584144391, 34.00367627183861, 38.00328933131973, 22.54994456755936,
                   43.142206712220926, 35.4400902933387, 32.745228660065884, 23.0, 23.58495283014151,
                   11.045361017187261,
                   17.507141400011598, 14.317821063276353, 25.16445906432324, 16.98528775146303, 10.606601717798213],
            countable=True, relevant=True),
    8: dict(frame_id=[1919, 1926, 1927, 1928, 1929, 1930],
            coords=[[539, 222, 580, 292, 0.4579685926437378, 0],
                    [173, 139, 259, 226, 0.816778838634491, 0],
                    [179, 153, 273, 235, 0.8301154375076294, 0],
                    [182, 147, 282, 236, 0.821264386177063, 0],
                    [192, 139, 303, 235, 0.7767919898033142, 0],
                    [190, 127, 325, 267, 0.6054115891456604, 0]],
            shift=[351.4861305940819, 15.239750654128171, 6.5,
                   16.140012391568973, 14.142135623730951],
            countable=True, relevant=True),
    9: dict(frame_id=[1930, 1931, 1932, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1941, 1942, 1943],
            coords=[[212, 130, 327, 247, 0.5533954501152039, 0], [200, 123, 347, 276, 0.775259256362915, 0],
                    [223, 117, 351, 284, 0.778387725353241, 0], [241, 125, 360, 298, 0.8165992498397827, 0],
                    [268, 125, 385, 306, 0.8290548324584961, 0], [289, 132, 399, 309, 0.8232706785202026, 0],
                    [313, 138, 442, 313, 0.8272396326065063, 0], [357, 169, 485, 315, 0.8394597768783569, 0],
                    [373, 184, 520, 304, 0.8281256556510925, 0], [392, 206, 558, 312, 0.8031188249588013, 0],
                    [445, 237, 618, 309, 0.7544645667076111, 0], [465, 239, 638, 329, 0.7902920842170715, 0],
                    [494, 246, 639, 352, 0.7076711058616638, 0]],
            shift=[11.704699910719626, 13.536986370680884, 17.414074767267998, 26.30589287593181, 18.200274723201296,
                   33.8710791088799, 46.52418725781247, 25.578311124857326, 32.20636583037583, 58.208676329220886,
                   22.825424421026653, 21.213203435596427],
            countable=True, relevant=True),
    10: dict(
        frame_id=[1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997,
                  1998, 1999],
        coords=[[165, 136, 249, 225, 0.6976139545440674, 0], [172, 148, 261, 238, 0.5043250322341919, 0],
                [160, 153, 268, 242, 0.7089585661888123, 0], [160, 142, 283, 260, 0.8157908320426941, 0],
                [166, 138, 299, 273, 0.7960121631622314, 0], [188, 125, 328, 273, 0.6637285947799683, 0],
                [225, 122, 349, 265, 0.6481208205223083, 0], [233, 121, 355, 293, 0.7730709910392761, 0],
                [265, 118, 365, 297, 0.8282994031906128, 0], [280, 128, 392, 306, 0.791393518447876, 0],
                [314, 133, 423, 295, 0.798650324344635, 0], [351, 151, 468, 319, 0.8457258939743042, 0],
                [375, 162, 512, 323, 0.8354584574699402, 0], [402, 172, 550, 327, 0.8248220086097717, 0],
                [422, 177, 581, 326, 0.8243173956871033, 0], [449, 189, 616, 331, 0.7774878740310669, 0],
                [475, 206, 638, 336, 0.8239080309867859, 0], [503, 227, 639, 341, 0.81203293800354, 0]],
        shift=[15.700318468107582, 5.1478150704935, 8.276472678623424, 11.884864324004713, 26.315394733881533,
               29.516944286290883, 15.20690632574555, 21.005951537600005, 23.04886114323222, 32.63816784073518,
               46.06517122512408, 34.81738071710737, 33.24530041975858, 25.578311124857326, 32.14420632089086,
               26.40075756488817, 19.474342094150447],
        countable=True, relevant=True)}

# xxx = []
# for k in x.keys():
#     xxx.extend(x[k]['frame_id'])
# for k in x2.keys():
#     xxx.extend(x2[k]['frame_id'])
# # print(set(xxx))
# xxx = sorted(list(set(xxx)))
#
#
# def get_pattern(input: list):
#     max_range = 6
#     pattern = []
#     cur_line = []
#     for id in input:
#         if not cur_line or (id - cur_line[-1]) <= max_range:
#             cur_line.append(id)
#             # print(id, cur_line)
#         else:
#             pattern.append(cur_line)
#             cur_line = [id]
#
#         if id == input[-1]:
#             pattern.append(cur_line)
#     return pattern
#
# pattern = get_pattern(xxx)
# print(xxx)
# print(len(pattern))
# print(pattern)
#
# p = [
#     [1559, 1560, 1561, 1562, 1563, 1566, 1567, 1568, 1569, 1570, 1571, 1572, 1573],
#     [1639, 1641, 1642, 1643, 1644, 1645, 1646, 1647, 1648, 1649, 1650, 1651, 1652, 1653, 1654, 1655, 1656, 1657, 1658, 1659, 1660],
#     [1702, 1703, 1704, 1705, 1706, 1707, 1708, 1709, 1710, 1711, 1712, 1713, 1714, 1715, 1716, 1717, 1718],
#     [1759, 1760, 1761, 1762, 1763, 1765, 1766, 1767],
#     [1810, 1811, 1812, 1813, 1814, 1815, 1816, 1817, 1818, 1819, 1820, 1821, 1822, 1823, 1824, 1825, 1826, 1827],
#     [1866, 1867, 1868, 1869, 1870, 1871, 1872, 1873, 1874, 1875, 1876, 1877, 1878, 1879, 1880, 1882, 1883, 1884],
#     [1918, 1919, 1920, 1924, 1925, 1926, 1927, 1928, 1929, 1930, 1931, 1932, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1941, 1942, 1943],
#     [1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999]
# ]

l = x2[10]['coords']
print(len(l), l)
ids = np.arange(len(l)).tolist()
print(len(ids), ids)
z = np.random.choice(ids, int(len(ids) * 0.5), replace=False)
print(len(z), z)
l2 = [l[i] for i in z]
print(len(l2), l2)